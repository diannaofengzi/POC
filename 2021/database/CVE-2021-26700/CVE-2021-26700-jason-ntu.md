# CVE-2021-26700

null

| Infos    | Value                                                              |
| -------- | -------------------------------------------------------------------|
| Username | [https://github.com/jason-ntu](https://github.com/jason-ntu) |
| Url      | [https://github.com/jason-ntu/CVE-2021-26700](https://github.com/jason-ntu/CVE-2021-26700)                                               |
| Stars    | 0                                                          |
| License  | No License                                                        |

<details>

<summary>Topic / Tags</summary>



</details>

## Readme

# **CVE-2021-26700**

## **Intruduction**
This is a remote code execution (RCE) vulnerability that resided in an extension of Visual Studio Code (VS Code) called [npm](https://marketplace.visualstudio.com/items?itemName=eg2.vscode-npm-script), which was developed by Microsoft and was aimed to support running the npm scripts defined in the package.json file.

To exploit this vulnerability, the attacker might upload some malicious script hidden in files onto his public GitHub repository, with some minor adjustment in the configuration used by the npm extension. If someone downloads this repository and opens it in a VS Code environment that has installed the specified extension, as soon as he(she) views the package.json file, the malicious script will be executed, and the following process (if any) may proceed.

## **Reproduction Environment**

Any mainstream OS including Windows, OS X, and UNIX-based OS can be used to reproduce this CVE. Here we assume the **Ubuntu** environment simply because it's more convenient for containerization.

## **Prerequisite**

1. Manually install the [VScode](https://code.visualstudio.com/) on your host machine if you have not.
   
2. Download the npm extension file though this [api](https://eg2.gallery.vsassets.io/_apis/public/gallery/publisher/eg2/extension/vscode-npm-script/0.3.13/assetbyname/Microsoft.VisualStudio.Services.VSIXPackage), and store it in some local path $EXTENSION_PATH.

3. Change the extension file's name to "npm-extension.vsix".

4. Install the extension onto VScode though the command
   
   ```code --force --install-extension $EXTENSION_PATH/npm-extension.vsix```
   
Note that the extension might be auto updated anytime, so make sure that the npm extension vesion is v0.3.13 before you start exploiting (If not, just run the command in step 3 again).

## **Quickstart**

1. Download the repository through the command

    ```git clone https://github.com/jason-ntu/CVE-2021-26700.git```

2. Open the cloned CVE-2021-26700 directory in VS Code.

3. View the package.json file.

In step 3, if a file called RCE.txt suddenly appears in the workspace and its content show "Ran: ./payload.sh ls --depth 0 --json", then the exploitation has succeeded.




## Get the content

```
git clone https://github.com/jason-ntu/CVE-2021-26700
cd CVE-2021-26700
```

{% embed url="https://github.com/jason-ntu/CVE-2021-26700" %}

<figure><img src="https://avatars.githubusercontent.com/u/26154393?v=4" alt=""><figcaption><p>jason-ntu</p></figcaption></figure>
